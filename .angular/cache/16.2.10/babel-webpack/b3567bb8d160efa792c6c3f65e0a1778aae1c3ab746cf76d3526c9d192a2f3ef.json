{"ast":null,"code":"import * as moment from 'moment';\nimport * as _ from 'lodash';\nimport { concatMap, tap } from 'rxjs/operators';\nimport { forkJoin } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./../core/service/portfolio.service\";\nimport * as i2 from \"./../core/service/category.service\";\nimport * as i3 from \"./../core/service/stock.service\";\nimport * as i4 from \"./../core/service/loading.service\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@angular/common\";\nimport * as i7 from \"@angular/router\";\nimport * as i8 from \"ngx-bootstrap/modal\";\nconst _c0 = [\"f\"];\nconst _c1 = function (a0) {\n  return {\n    \"active\": a0\n  };\n};\nfunction PortfoliosComponent_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function PortfoliosComponent_button_9_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const category_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.changeTab(category_r6.id));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r6 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(2, _c1, category_r6.id === ctx_r0.currentCategory.id));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", category_r6.categoryName, \" \");\n  }\n}\nconst _c2 = function (a0) {\n  return {\n    \"color\": a0\n  };\n};\nfunction PortfoliosComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 28)(1, \"div\", 29)(2, \"h3\", 30);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"h4\", 31);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 32)(7, \"div\", 33);\n    i0.ɵɵtext(8, \"\\u6628\\u6536\");\n    i0.ɵɵelement(9, \"br\");\n    i0.ɵɵelementStart(10, \"span\", 34);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"div\");\n    i0.ɵɵtext(13, \"\\u6F32\\u8DCC\\u5E45\");\n    i0.ɵɵelement(14, \"br\");\n    i0.ɵɵelementStart(15, \"span\", 35);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"div\", 36)(18, \"a\", 37);\n    i0.ɵɵtext(19, \"\\u67E5\\u770B\\u8A73\\u7D30\\u8CC7\\u6599\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"i\", 38);\n    i0.ɵɵlistener(\"click\", function PortfoliosComponent_div_12_Template_i_click_20_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const portfolioStockInfo_r9 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.deletePortfolio(portfolioStockInfo_r9.stockId));\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const portfolioStockInfo_r9 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(portfolioStockInfo_r9.stockId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(portfolioStockInfo_r9.stockName);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(portfolioStockInfo_r9.close);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngStyle\", i0.ɵɵpureFunction1(5, _c2, portfolioStockInfo_r9.changeRate == 0 ? \"black\" : portfolioStockInfo_r9.changeRate > 0 ? \"red\" : \"#5fc31c\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", portfolioStockInfo_r9.changeRate, \" % \");\n  }\n}\nfunction PortfoliosComponent_ng_container_41_span_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(category_r12.categoryName);\n  }\n}\nfunction PortfoliosComponent_ng_container_41_input_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"input\", 45);\n    i0.ɵɵlistener(\"blur\", function PortfoliosComponent_ng_container_41_input_5_Template_input_blur_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const i_r13 = i0.ɵɵnextContext().index;\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.endEditCategoryName(i_r13));\n    })(\"ngModelChange\", function PortfoliosComponent_ng_container_41_input_5_Template_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r21 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r21.editingName = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const category_r12 = i0.ɵɵnextContext().$implicit;\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"value\", category_r12.categoryName)(\"ngModel\", ctx_r15.editingName);\n  }\n}\nfunction PortfoliosComponent_ng_container_41_i_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"i\", 46);\n    i0.ɵɵlistener(\"click\", function PortfoliosComponent_ng_container_41_i_6_Template_i_click_0_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext();\n      const category_r12 = ctx_r24.$implicit;\n      const i_r13 = ctx_r24.index;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.deleteCategory(category_r12.id, i_r13));\n    });\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PortfoliosComponent_ng_container_41_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"li\", 39);\n    i0.ɵɵlistener(\"dblclick\", function PortfoliosComponent_ng_container_41_Template_li_dblclick_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const category_r12 = restoredCtx.$implicit;\n      const ctx_r26 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r26.startEditCategoryName(category_r12));\n    })(\"dragstart\", function PortfoliosComponent_ng_container_41_Template_li_dragstart_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const i_r13 = restoredCtx.index;\n      const ctx_r28 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r28.onDragStart(i_r13));\n    })(\"dragover\", function PortfoliosComponent_ng_container_41_Template_li_dragover_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r27);\n      const i_r13 = restoredCtx.index;\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.onDragOver($event, i_r13));\n    })(\"dragend\", function PortfoliosComponent_ng_container_41_Template_li_dragend_1_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r30 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r30.onDragEnd());\n    });\n    i0.ɵɵelementStart(2, \"div\", 40);\n    i0.ɵɵelement(3, \"i\", 41);\n    i0.ɵɵtemplate(4, PortfoliosComponent_ng_container_41_span_4_Template, 2, 1, \"span\", 42);\n    i0.ɵɵtemplate(5, PortfoliosComponent_ng_container_41_input_5_Template, 1, 2, \"input\", 43);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, PortfoliosComponent_ng_container_41_i_6_Template, 1, 0, \"i\", 44);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const category_r12 = ctx.$implicit;\n    const i_r13 = ctx.index;\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"dragging\", ctx_r5.isDragging && i_r13 === ctx_r5.draggedIndex);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.editingItem !== category_r12.categoryName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.editingItem === category_r12.categoryName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.categroiesEdited.length > 1);\n  }\n}\nexport let PortfoliosComponent = /*#__PURE__*/(() => {\n  class PortfoliosComponent {\n    constructor(portfolioService, categoryService, stockService, loadingService) {\n      this.portfolioService = portfolioService;\n      this.categoryService = categoryService;\n      this.stockService = stockService;\n      this.loadingService = loadingService;\n      this.stocksInfo = []; //  所有個股基本資訊\n      this.editingItem = ''; //  點選兩下編輯的類別\n      this.editingName = ''; //  點選兩下編輯的類別名稱\n      this.isDragging = false; //  是否正在拖曳\n      this.currentPortfolios = []; //  當前類別的所有投資標的\n      this.currentPortfoliosStockInfo = []; //  當前類別的所有投資標的的日成交資訊\n    }\n\n    ngOnInit() {\n      this.loadingService.show();\n      this.portfolioService.getPortfolios().pipe(tap(res => this.portfolios = res), concatMap(() => this.stockService.getTaiwanStockInfo()), tap(res => this.stocksInfo = res.data), concatMap(() => this.categoryService.getCategories()), tap(res => {\n        // 如果沒有類別，預設「我的」類別\n        if (res.length === 0) {\n          const req = {\n            categoryName: '我的'\n          };\n          this.categoryService.addCategory(req).pipe(concatMap(() => this.categoryService.getCategories())).subscribe(res => {\n            this.categories = res;\n            this.currentCategory = res[0];\n            this.changeTab(res[0].id);\n          });\n        } else {\n          this.categories = res;\n          this.currentCategory = res[0];\n          this.changeTab(res[0].id);\n        }\n      })).subscribe();\n    }\n    /** 切換Tab */\n    changeTab(id) {\n      this.loadingService.show();\n      this.currentCategory = this.categories.find(category => category.id === id);\n      this.currentPortfolios = this.portfolios.filter(portfolio => portfolio.categories.includes(this.currentCategory.id));\n      this.getCurrentPortfoliosStockInfo();\n    }\n    /** 取得當前類別的所有投資標的的日成交資訊 */\n    getCurrentPortfoliosStockInfo() {\n      this.currentPortfoliosStockInfo = [];\n      // 取一個月前的日期，預防股票休市\n      const startDate = moment(new Date().setMonth(new Date().getMonth() - 1)).format('YYYY-MM-DD');\n      const observables = this.currentPortfolios.map(portfolio => {\n        const req = {\n          stockId: portfolio.stockId,\n          startDate: startDate\n        };\n        return this.stockService.getTaiwanStockPrice(req);\n      });\n      if (observables.length !== 0) {\n        // 一次取得所有股票的日成交資訊\n        forkJoin(observables).subscribe(res => {\n          res.map(r => r.data).forEach(r => {\n            const lastStockInfo = r[r.length - 1];\n            const changeRate = ((lastStockInfo.close - r[r.length - 2].close) * 100 / lastStockInfo.close).toFixed(2);\n            const stockInfo = {\n              stockId: lastStockInfo.stock_id,\n              stockName: this.stocksInfo.find(stockInfo => stockInfo.stock_id === lastStockInfo.stock_id).stock_name,\n              close: lastStockInfo.close,\n              changeRate: changeRate\n            };\n            this.currentPortfoliosStockInfo.push(stockInfo);\n          });\n          this.loadingService.hide();\n        });\n      } else {\n        this.loadingService.hide();\n      }\n    }\n    /** 移除指定投資標的 */\n    deletePortfolio(portfolioId) {\n      this.loadingService.show();\n      this.portfolios = this.portfolios.map(portfolio => {\n        if (portfolio.stockId === portfolioId) {\n          const updatedCategories = portfolio.categories.filter(category => category !== this.currentCategory.id);\n          return {\n            ...portfolio,\n            categories: updatedCategories\n          };\n        } else {\n          return portfolio;\n        }\n      }).filter(portfolio => portfolio.categories.length !== 0);\n      this.currentPortfoliosStockInfo = this.currentPortfoliosStockInfo.filter(portfolio => portfolio.stockId !== portfolioId);\n      const req = this.portfolios.find(portfolio => portfolio.stockId === portfolioId);\n      if (!req) {\n        this.portfolioService.deletePortfolio(portfolioId).subscribe(() => this.loadingService.hide());\n      } else {\n        this.portfolioService.updatePortfolio(portfolioId, req).subscribe(() => this.loadingService.hide());\n      }\n    }\n    /** 提交新增類別表單 */\n    onAddCategorySubmit(categoryName) {\n      const req = {\n        categoryName: categoryName\n      };\n      this.categoryService.addCategory(req).pipe(concatMap(() => this.categoryService.getCategories()), tap(res => this.categories = res)).subscribe();\n      this.form.reset();\n    }\n    /** 開始編輯類別，事先備份編輯前資料 */\n    startEditCategories() {\n      this.categroiesEdited = _.cloneDeep(this.categories);\n      this.portfoliosEdited = _.cloneDeep(this.portfolios);\n    }\n    /** 結束編輯類別 */\n    endEditCategories() {\n      if (!_.isEqual(this.categories, this.categroiesEdited)) {\n        this.loadingService.show();\n        this.handleCategoriesModify();\n        if (!_.isEqual(this.portfolios, this.portfoliosEdited)) {\n          this.handlePortfoliosModify();\n        }\n      }\n    }\n    /** 異動類別處理 */\n    handleCategoriesModify() {\n      this.categories = _.cloneDeep(this.categroiesEdited);\n      const transformedData = {};\n      this.categroiesEdited.map(category => {\n        transformedData[category.id] = {\n          categoryName: category.categoryName\n        };\n      });\n      this.categoryService.updateCategories(transformedData).subscribe(() => {\n        // 如果刪除的類別為當下類別，則需切換tab為第一個類別\n        if (!this.categories.some(category => category.id === this.currentCategory.id)) {\n          this.currentCategory = this.categories[0];\n          this.changeTab(this.categories[0].id);\n        } else {\n          this.changeTab(this.currentCategory.id);\n        }\n      });\n    }\n    /** 異動投資標的處理 */\n    handlePortfoliosModify() {\n      this.portfolios = _.cloneDeep(this.portfoliosEdited);\n      const transformedData = this.portfoliosEdited.reduce((result, item) => {\n        result[item.stockId] = item;\n        return result;\n      }, {});\n      this.portfolioService.updatePortfolios(transformedData).subscribe();\n    }\n    /** 開始編輯類別名稱 */\n    startEditCategoryName(category) {\n      this.editingItem = this.editingName = category.categoryName;\n    }\n    /** 結束編輯類別名稱 */\n    endEditCategoryName(index) {\n      this.editingItem = '';\n      this.categroiesEdited[index].categoryName = this.editingName;\n    }\n    /** 刪除指定類別 */\n    deleteCategory(categoryId, index) {\n      this.categroiesEdited.splice(index, 1);\n      // 刪除類別，包含該類別的投資標的也要移除該類別，如果投資標的的類別皆被刪除，則移除該投資標的\n      this.portfoliosEdited.forEach(portfolio => portfolio.categories = portfolio.categories.filter(category => category !== categoryId));\n      this.portfoliosEdited = this.portfoliosEdited.filter(portfolio => portfolio.categories.length !== 0);\n    }\n    /** 開始拖曳 */\n    onDragStart(index) {\n      this.isDragging = true;\n      this.draggedIndex = index;\n    }\n    /** 拖曳中 */\n    onDragOver(event, index) {\n      event.preventDefault();\n      if (this.draggedIndex !== index) {\n        const draggedItem = this.categroiesEdited[this.draggedIndex]; // 交換的類別\n        const dragOverItem = this.categroiesEdited[index]; // 被交換的類別\n        const cloneDraggedItem = _.cloneDeep(draggedItem);\n        // 交換類別，投資標的也要交換\n        this.portfoliosEdited.forEach(portfolio => {\n          if (portfolio.categories.includes(draggedItem.id) && portfolio.categories.includes(dragOverItem.id)) {\n            return;\n          } else if (portfolio.categories.includes(draggedItem.id)) {\n            portfolio.categories = portfolio.categories.filter(category => category !== draggedItem.id);\n            portfolio.categories.push(dragOverItem.id);\n          } else if (portfolio.categories.includes(dragOverItem.id)) {\n            portfolio.categories = portfolio.categories.filter(category => category !== dragOverItem.id);\n            portfolio.categories.push(draggedItem.id);\n          }\n        });\n        // 類別互換ID\n        draggedItem.id = dragOverItem.id;\n        dragOverItem.id = cloneDraggedItem.id;\n        this.categroiesEdited.splice(this.draggedIndex, 1);\n        this.categroiesEdited.splice(index, 0, draggedItem);\n        this.draggedIndex = index;\n      }\n      ;\n    }\n    /** 結束拖曳 */\n    onDragEnd() {\n      this.isDragging = false;\n      this.draggedIndex = null;\n    }\n    static #_ = this.ɵfac = function PortfoliosComponent_Factory(t) {\n      return new (t || PortfoliosComponent)(i0.ɵɵdirectiveInject(i1.PortfolioService), i0.ɵɵdirectiveInject(i2.CategoryService), i0.ɵɵdirectiveInject(i3.StockService), i0.ɵɵdirectiveInject(i4.LoadingService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PortfoliosComponent,\n      selectors: [[\"app-portfolios\"]],\n      viewQuery: function PortfoliosComponent_Query(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵviewQuery(_c0, 5);\n        }\n        if (rf & 2) {\n          let _t;\n          i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.form = _t.first);\n        }\n      },\n      decls: 44,\n      vars: 4,\n      consts: [[1, \"row\"], [1, \"col-md-12\", \"d-flex\", \"mt-5\", \"category-panel\"], [1, \"btn\", \"mr-3\", 3, \"click\"], [1, \"btn\", 3, \"click\"], [1, \"col-md-12\", \"mt-5\"], [\"id\", \"nav-tab\", \"role\", \"tablist\", 1, \"nav\", \"nav-tabs\"], [\"class\", \"nav-link\", \"id\", \"nav-home-tab\", \"data-toggle\", \"tab\", \"data-target\", \"#nav-home\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"nav-home\", \"aria-selected\", \"true\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"nav-tabContent\", 1, \"tab-content\"], [1, \"cards\", \"d-flex\", \"flex-wrap\", \"mt-5\"], [\"class\", \"card mr-3 mb-5\", \"style\", \"width: 15rem;\", 4, \"ngFor\", \"ngForOf\"], [\"bsModal\", \"\", \"tabindex\", \"-1\", \"role\", \"dialog\", \"aria-labelledby\", \"dialog-sizes-name2\", 1, \"modal\", \"fade\"], [\"addCategory\", \"bs-modal\"], [1, \"modal-dialog\", \"modal-sm\"], [1, \"modal-content\"], [1, \"modal-header\"], [\"id\", \"dialog-sizes-name2\", 1, \"modal-title\", \"pull-left\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"close\", \"pull-right\", 3, \"click\"], [\"aria-hidden\", \"true\"], [1, \"modal-body\"], [3, \"ngSubmit\"], [\"f\", \"ngForm\"], [\"type\", \"text\", \"placeholder\", \"\\u8ACB\\u8F38\\u5165\\u985E\\u5225\\u540D\\u7A31\", \"name\", \"categoryName\", \"ngModel\", \"\", \"required\", \"\", \"maxlength\", \"6\", \"autocomplete\", \"off\", 1, \"form-control\"], [\"type\", \"submit\", 1, \"btn\", \"mt-2\", 3, \"disabled\", \"click\"], [\"editCategories\", \"bs-modal\"], [1, \"list-group\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", 1, \"btn\", \"mt-3\", 3, \"click\"], [\"id\", \"nav-home-tab\", \"data-toggle\", \"tab\", \"data-target\", \"#nav-home\", \"type\", \"button\", \"role\", \"tab\", \"aria-controls\", \"nav-home\", \"aria-selected\", \"true\", 1, \"nav-link\", 3, \"ngClass\", \"click\"], [1, \"card\", \"mr-3\", \"mb-5\", 2, \"width\", \"15rem\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-subtitle\", \"mb-5\", \"text-muted\"], [1, \"card-info\", \"d-flex\", \"mb-3\"], [1, \"mr-5\"], [1, \"font-weight-bold\"], [1, \"font-weight-bold\", 3, \"ngStyle\"], [1, \"card-buttom\", \"d-flex\", \"align-items-center\", \"justify-content-between\"], [\"routerLink\", \"#\", 1, \"card-link\"], [\"type\", \"button\", 1, \"fa-solid\", \"fa-trash\", 3, \"click\"], [\"draggable\", \"true\", 1, \"list-group-item\", \"d-flex\", \"align-items-center\", \"justify-content-between\", 3, \"dblclick\", \"dragstart\", \"dragover\", \"dragend\"], [1, \"d-flex\", \"align-items-center\"], [1, \"fa-solid\", \"fa-bars\", \"mr-3\"], [4, \"ngIf\"], [\"type\", \"text\", \"class\", \"form-control\", 3, \"value\", \"ngModel\", \"blur\", \"ngModelChange\", 4, \"ngIf\"], [\"class\", \"fa-solid fa-trash float-right ml-3\", \"type\", \"button\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"text\", 1, \"form-control\", 3, \"value\", \"ngModel\", \"blur\", \"ngModelChange\"], [\"type\", \"button\", 1, \"fa-solid\", \"fa-trash\", \"float-right\", \"ml-3\", 3, \"click\"]],\n      template: function PortfoliosComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          const _r31 = i0.ɵɵgetCurrentView();\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function PortfoliosComponent_Template_button_click_2_listener() {\n            i0.ɵɵrestoreView(_r31);\n            const _r2 = i0.ɵɵreference(14);\n            return i0.ɵɵresetView(_r2.show());\n          });\n          i0.ɵɵtext(3, \"\\u65B0\\u589E\\u985E\\u5225\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(4, \"button\", 3);\n          i0.ɵɵlistener(\"click\", function PortfoliosComponent_Template_button_click_4_listener() {\n            i0.ɵɵrestoreView(_r31);\n            const _r4 = i0.ɵɵreference(30);\n            _r4.show();\n            return i0.ɵɵresetView(ctx.startEditCategories());\n          });\n          i0.ɵɵtext(5, \"\\u7DE8\\u8F2F\\u985E\\u5225\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(6, \"div\", 4)(7, \"nav\")(8, \"div\", 5);\n          i0.ɵɵtemplate(9, PortfoliosComponent_button_9_Template, 2, 4, \"button\", 6);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(10, \"div\", 7)(11, \"div\", 8);\n          i0.ɵɵtemplate(12, PortfoliosComponent_div_12_Template, 21, 7, \"div\", 9);\n          i0.ɵɵelementEnd()()()();\n          i0.ɵɵelementStart(13, \"div\", 10, 11)(15, \"div\", 12)(16, \"div\", 13)(17, \"div\", 14)(18, \"h4\", 15);\n          i0.ɵɵtext(19, \"\\u65B0\\u589E\\u985E\\u5225\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(20, \"button\", 16);\n          i0.ɵɵlistener(\"click\", function PortfoliosComponent_Template_button_click_20_listener() {\n            i0.ɵɵrestoreView(_r31);\n            const _r2 = i0.ɵɵreference(14);\n            return i0.ɵɵresetView(_r2.hide());\n          });\n          i0.ɵɵelementStart(21, \"span\", 17);\n          i0.ɵɵtext(22, \"\\u00D7\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(23, \"div\", 18)(24, \"form\", 19, 20);\n          i0.ɵɵlistener(\"ngSubmit\", function PortfoliosComponent_Template_form_ngSubmit_24_listener() {\n            i0.ɵɵrestoreView(_r31);\n            const _r3 = i0.ɵɵreference(25);\n            return i0.ɵɵresetView(ctx.onAddCategorySubmit(_r3.controls.categoryName.value));\n          });\n          i0.ɵɵelement(26, \"input\", 21);\n          i0.ɵɵelementStart(27, \"button\", 22);\n          i0.ɵɵlistener(\"click\", function PortfoliosComponent_Template_button_click_27_listener() {\n            i0.ɵɵrestoreView(_r31);\n            const _r2 = i0.ɵɵreference(14);\n            return i0.ɵɵresetView(_r2.hide());\n          });\n          i0.ɵɵtext(28, \"\\u9001\\u51FA\");\n          i0.ɵɵelementEnd()()()()()();\n          i0.ɵɵelementStart(29, \"div\", 10, 23)(31, \"div\", 12)(32, \"div\", 13)(33, \"div\", 14)(34, \"h4\", 15);\n          i0.ɵɵtext(35, \"\\u7DE8\\u8F2F\\u985E\\u5225\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(36, \"button\", 16);\n          i0.ɵɵlistener(\"click\", function PortfoliosComponent_Template_button_click_36_listener() {\n            i0.ɵɵrestoreView(_r31);\n            const _r4 = i0.ɵɵreference(30);\n            return i0.ɵɵresetView(_r4.hide());\n          });\n          i0.ɵɵelementStart(37, \"span\", 17);\n          i0.ɵɵtext(38, \"\\u00D7\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(39, \"div\", 18)(40, \"ul\", 24);\n          i0.ɵɵtemplate(41, PortfoliosComponent_ng_container_41_Template, 7, 5, \"ng-container\", 25);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(42, \"button\", 26);\n          i0.ɵɵlistener(\"click\", function PortfoliosComponent_Template_button_click_42_listener() {\n            i0.ɵɵrestoreView(_r31);\n            const _r4 = i0.ɵɵreference(30);\n            _r4.hide();\n            return i0.ɵɵresetView(ctx.endEditCategories());\n          });\n          i0.ɵɵtext(43, \"\\u78BA\\u8A8D\");\n          i0.ɵɵelementEnd()()()()();\n        }\n        if (rf & 2) {\n          const _r3 = i0.ɵɵreference(25);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngForOf\", ctx.categories);\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"ngForOf\", ctx.currentPortfoliosStockInfo);\n          i0.ɵɵadvance(15);\n          i0.ɵɵproperty(\"disabled\", _r3.invalid);\n          i0.ɵɵadvance(14);\n          i0.ɵɵproperty(\"ngForOf\", ctx.categroiesEdited);\n        }\n      },\n      dependencies: [i5.ɵNgNoValidate, i5.DefaultValueAccessor, i5.NgControlStatus, i5.NgControlStatusGroup, i5.RequiredValidator, i5.MaxLengthValidator, i5.NgModel, i5.NgForm, i6.NgClass, i6.NgForOf, i6.NgIf, i6.NgStyle, i7.RouterLink, i8.ModalDirective],\n      styles: [\".category-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .modal-body[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#c664ff;border:2px solid #c664ff;font-weight:700}.nav-link[_ngcontent-%COMP%]{min-width:66px;margin-right:1px;background-color:#eed1ff}.nav-link.active[_ngcontent-%COMP%]{background-color:#c664ff;color:#fff}.nav-tabs[_ngcontent-%COMP%]{border-bottom:1px solid #eed1ff}.card[_ngcontent-%COMP%]{border:3px solid #c664ff}.dragging[_ngcontent-%COMP%]{transform:scale(1);transition:transform .15s}.dragging.dragging-enter[_ngcontent-%COMP%]{transform:scale(1.1)}.dragging.dragging-leave[_ngcontent-%COMP%]{transform:scale(1)}\"]\n    });\n  }\n  return PortfoliosComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}